{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\Users\\\\Atefeh\\\\Desktop\\\\Demo\\\\Houtman_src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"C:\\\\Users\\\\Atefeh\\\\Desktop\\\\Demo\\\\Houtman_src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Atefeh\\\\Desktop\\\\Demo\\\\Houtman_src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\Atefeh\\\\Desktop\\\\Demo\\\\Houtman_src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Atefeh\\\\Desktop\\\\Demo\\\\Houtman_src\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\n\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\n\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n\nimport { combineReducers, createStore } from \"redux\";\nimport throttle from \"lodash.throttle\";\nimport seed from \"./seed\";\n\nvar board = function board() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    lists: []\n  };\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"ADD_LIST\":\n      {\n        var listId = action.payload.listId;\n        return {\n          lists: [].concat(_toConsumableArray(state.lists), [listId])\n        };\n      }\n\n    case \"MOVE_LIST\":\n      {\n        var _action$payload = action.payload,\n            oldListIndex = _action$payload.oldListIndex,\n            newListIndex = _action$payload.newListIndex;\n        var newLists = Array.from(state.lists);\n\n        var _newLists$splice = newLists.splice(oldListIndex, 1),\n            _newLists$splice2 = _slicedToArray(_newLists$splice, 1),\n            removedList = _newLists$splice2[0];\n\n        newLists.splice(newListIndex, 0, removedList);\n        return {\n          lists: newLists\n        };\n      }\n\n    case \"DELETE_LIST\":\n      {\n        var _listId = action.payload.listId;\n\n        var filterDeleted = function filterDeleted(tmpListId) {\n          return tmpListId !== _listId;\n        };\n\n        var _newLists = state.lists.filter(filterDeleted);\n\n        return {\n          lists: _newLists\n        };\n      }\n\n    default:\n      return state;\n  }\n};\n\nvar listsById = function listsById() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"ADD_LIST\":\n      {\n        var _action$payload2 = action.payload,\n            listId = _action$payload2.listId,\n            listTitle = _action$payload2.listTitle;\n        return _objectSpread({}, state, _defineProperty({}, listId, {\n          _id: listId,\n          title: listTitle,\n          cards: []\n        }));\n      }\n\n    case \"CHANGE_LIST_TITLE\":\n      {\n        var _action$payload3 = action.payload,\n            _listId2 = _action$payload3.listId,\n            _listTitle = _action$payload3.listTitle;\n        return _objectSpread({}, state, _defineProperty({}, _listId2, _objectSpread({}, state[_listId2], {\n          title: _listTitle\n        })));\n      }\n\n    case \"DELETE_LIST\":\n      {\n        var _listId3 = action.payload.listId;\n\n        var deletedList = state[_listId3],\n            restOfLists = _objectWithoutProperties(state, [_listId3].map(_toPropertyKey));\n\n        return restOfLists;\n      }\n\n    case \"ADD_CARD\":\n      {\n        var _action$payload4 = action.payload,\n            _listId4 = _action$payload4.listId,\n            cardId = _action$payload4.cardId;\n        return _objectSpread({}, state, _defineProperty({}, _listId4, _objectSpread({}, state[_listId4], {\n          cards: [].concat(_toConsumableArray(state[_listId4].cards), [cardId])\n        })));\n      }\n\n    case \"MOVE_CARD\":\n      {\n        var _objectSpread6;\n\n        var _action$payload5 = action.payload,\n            oldCardIndex = _action$payload5.oldCardIndex,\n            newCardIndex = _action$payload5.newCardIndex,\n            sourceListId = _action$payload5.sourceListId,\n            destListId = _action$payload5.destListId; // Move within the same list\n\n        if (sourceListId === destListId) {\n          var newCards = Array.from(state[sourceListId].cards);\n\n          var _newCards$splice = newCards.splice(oldCardIndex, 1),\n              _newCards$splice2 = _slicedToArray(_newCards$splice, 1),\n              _removedCard = _newCards$splice2[0];\n\n          newCards.splice(newCardIndex, 0, _removedCard);\n          return _objectSpread({}, state, _defineProperty({}, sourceListId, _objectSpread({}, state[sourceListId], {\n            cards: newCards\n          })));\n        } // Move card from one list to another\n\n\n        var sourceCards = Array.from(state[sourceListId].cards);\n\n        var _sourceCards$splice = sourceCards.splice(oldCardIndex, 1),\n            _sourceCards$splice2 = _slicedToArray(_sourceCards$splice, 1),\n            removedCard = _sourceCards$splice2[0];\n\n        var destinationCards = Array.from(state[destListId].cards);\n        destinationCards.splice(newCardIndex, 0, removedCard);\n        return _objectSpread({}, state, (_objectSpread6 = {}, _defineProperty(_objectSpread6, sourceListId, _objectSpread({}, state[sourceListId], {\n          cards: sourceCards\n        })), _defineProperty(_objectSpread6, destListId, _objectSpread({}, state[destListId], {\n          cards: destinationCards\n        })), _objectSpread6));\n      }\n\n    case \"DELETE_CARD\":\n      {\n        var _action$payload6 = action.payload,\n            deletedCardId = _action$payload6.cardId,\n            _listId5 = _action$payload6.listId;\n\n        var filterDeleted = function filterDeleted(cardId) {\n          return cardId !== deletedCardId;\n        };\n\n        return _objectSpread({}, state, _defineProperty({}, _listId5, _objectSpread({}, state[_listId5], {\n          cards: state[_listId5].cards.filter(filterDeleted)\n        })));\n      }\n\n    default:\n      return state;\n  }\n};\n\nvar cardsById = function cardsById() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case \"ADD_CARD\":\n      {\n        var _action$payload7 = action.payload,\n            cardText = _action$payload7.cardText,\n            cardDesc = _action$payload7.cardDesc,\n            cardId = _action$payload7.cardId;\n        return _objectSpread({}, state, _defineProperty({}, cardId, {\n          text: cardText,\n          desc: cardDesc,\n          _id: cardId\n        }));\n      }\n\n    case \"CHANGE_CARD_TEXT\":\n      {\n        var _action$payload8 = action.payload,\n            _cardText = _action$payload8.cardText,\n            _cardDesc = _action$payload8.cardDesc,\n            _cardId = _action$payload8.cardId;\n        return _objectSpread({}, state, _defineProperty({}, _cardId, _objectSpread({}, state[_cardId], {\n          text: _cardText,\n          desc: _cardDesc\n        })));\n      }\n\n    case \"DELETE_CARD\":\n      {\n        var _cardId2 = action.payload.cardId;\n\n        var deletedCard = state[_cardId2],\n            restOfCards = _objectWithoutProperties(state, [_cardId2].map(_toPropertyKey));\n\n        return restOfCards;\n      }\n    // Find every card from the deleted list and remove it\n\n    case \"DELETE_LIST\":\n      {\n        var cardIds = action.payload.cards;\n        return Object.keys(state).filter(function (cardId) {\n          return !cardIds.includes(cardId);\n        }).reduce(function (newState, cardId) {\n          return _objectSpread({}, newState, _defineProperty({}, cardId, state[cardId]));\n        }, {});\n      }\n\n    default:\n      return state;\n  }\n};\n\nvar reducers = combineReducers({\n  board: board,\n  listsById: listsById,\n  cardsById: cardsById\n});\n/***\r\n * OVER HERE :)\r\n * \r\n * I SAID\r\n *        .-'''-.\r\n *       '   _    \\\r\n *     /   /` '.   \\.----.     .----.   __.....__\r\n *    .   |     \\  ' \\    \\   /    /.-''         '.\r\n *    |   '      |  ' '   '. /'   //     .-''\"'-.  `. .-,.--.\r\n *    \\    \\     / /  |    |'    //     /________\\   \\|  .-. |\r\n *     `.   ` ..' /   |    ||    ||                  || |  | |\r\n *        '-...-'`    '.   `'   .'\\    .-------------'| |  | |\r\n *                     \\        /  \\    '-.____...---.| |  '-\r\n *                      \\      /    `.             .' | |\r\n *                       '----'       `''-...... -'   | |\r\n *                                                    |_|\r\n *       .              __.....__                   __.....__\r\n *     .'|          .-''         '.             .-''         '.\r\n *    <  |         /     .-''\"'-.  `. .-,.--.  /     .-''\"'-.  `.\r\n *     | |        /     /________\\   \\|  .-. |/     /________\\   \\\r\n *     | | .'''-. |                  || |  | ||                  |\r\n *     | |/.'''. \\\\    .-------------'| |  | |\\    .-------------'\r\n *     |  /    | | \\    '-.____...---.| |  '-  \\    '-.____...---.\r\n *     | |     | |  `.             .' | |       `.             .'\r\n *     | |     | |    `''-...... -'   | |         `''-...... -'\r\n *     | '.    | '.                   |_|\r\n *     '---'   '---'\r\n */\n\nvar saveState = function saveState(state) {\n  try {\n    var serializedState = JSON.stringify(state);\n    localStorage.setItem(\"state\", serializedState);\n  } catch (_unused) {// ignore write errors\n  }\n};\n\nvar loadState = function loadState() {\n  try {\n    var serializedState = localStorage.getItem(\"state\");\n\n    if (serializedState === null) {\n      return undefined;\n    }\n\n    console.log(\"Loading JSON\", serializedState);\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nvar persistedState = loadState();\nvar store = createStore(reducers, persistedState);\nstore.subscribe(throttle(function () {\n  saveState(store.getState());\n}, 1000));\nconsole.log(store.getState());\n\nif (!store.getState().board.lists.length) {\n  console.log(\"SEED\");\n  seed(store);\n}\n\nexport default store;","map":{"version":3,"sources":["C:\\Users\\Atefeh\\Desktop\\Demo\\Houtman_src\\src\\store.js"],"names":["combineReducers","createStore","throttle","seed","board","state","lists","action","type","listId","payload","oldListIndex","newListIndex","newLists","Array","from","splice","removedList","filterDeleted","tmpListId","filter","listsById","listTitle","_id","title","cards","deletedList","restOfLists","cardId","oldCardIndex","newCardIndex","sourceListId","destListId","newCards","removedCard","sourceCards","destinationCards","deletedCardId","cardsById","cardText","cardDesc","text","desc","deletedCard","restOfCards","cardIds","Object","keys","includes","reduce","newState","reducers","saveState","serializedState","JSON","stringify","localStorage","setItem","loadState","getItem","undefined","console","log","parse","err","persistedState","store","subscribe","getState","length"],"mappings":"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","sourcesContent":["import { combineReducers, createStore } from \"redux\";\r\nimport throttle from \"lodash.throttle\";\r\nimport seed from \"./seed\";\r\n\r\nconst board = (state = { lists: [] }, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_LIST\": {\r\n      const { listId } = action.payload;\r\n      return { lists: [...state.lists, listId] };\r\n    }\r\n    case \"MOVE_LIST\": {\r\n      const { oldListIndex, newListIndex } = action.payload;\r\n      const newLists = Array.from(state.lists);\r\n      const [removedList] = newLists.splice(oldListIndex, 1);\r\n      newLists.splice(newListIndex, 0, removedList);\r\n      return { lists: newLists };\r\n    }\r\n    case \"DELETE_LIST\": {\r\n      const { listId } = action.payload;\r\n      const filterDeleted = tmpListId => tmpListId !== listId;\r\n      const newLists = state.lists.filter(filterDeleted);\r\n      return { lists: newLists };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst listsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_LIST\": {\r\n      const { listId, listTitle } = action.payload;\r\n      return {\r\n        ...state,\r\n        [listId]: { _id: listId, title: listTitle, cards: [] }\r\n      };\r\n    }\r\n    case \"CHANGE_LIST_TITLE\": {\r\n      const { listId, listTitle } = action.payload;\r\n      return {\r\n        ...state,\r\n        [listId]: { ...state[listId], title: listTitle }\r\n      };\r\n    }\r\n    case \"DELETE_LIST\": {\r\n      const { listId } = action.payload;\r\n      const { [listId]: deletedList, ...restOfLists } = state;\r\n      return restOfLists;\r\n    }\r\n    case \"ADD_CARD\": {\r\n      const { listId, cardId } = action.payload;\r\n      return {\r\n        ...state,\r\n        [listId]: { ...state[listId], cards: [...state[listId].cards, cardId] }\r\n      };\r\n    }\r\n    case \"MOVE_CARD\": {\r\n      const {\r\n        oldCardIndex,\r\n        newCardIndex,\r\n        sourceListId,\r\n        destListId\r\n      } = action.payload;\r\n      // Move within the same list\r\n      if (sourceListId === destListId) {\r\n        const newCards = Array.from(state[sourceListId].cards);\r\n        const [removedCard] = newCards.splice(oldCardIndex, 1);\r\n        newCards.splice(newCardIndex, 0, removedCard);\r\n        return {\r\n          ...state,\r\n          [sourceListId]: { ...state[sourceListId], cards: newCards }\r\n        };\r\n      }\r\n      // Move card from one list to another\r\n      const sourceCards = Array.from(state[sourceListId].cards);\r\n      const [removedCard] = sourceCards.splice(oldCardIndex, 1);\r\n      const destinationCards = Array.from(state[destListId].cards);\r\n      destinationCards.splice(newCardIndex, 0, removedCard);\r\n      return {\r\n        ...state,\r\n        [sourceListId]: { ...state[sourceListId], cards: sourceCards },\r\n        [destListId]: { ...state[destListId], cards: destinationCards }\r\n      };\r\n    }\r\n    case \"DELETE_CARD\": {\r\n      const { cardId: deletedCardId, listId } = action.payload;\r\n      const filterDeleted = cardId => cardId !== deletedCardId;\r\n      return {\r\n        ...state,\r\n        [listId]: {\r\n          ...state[listId],\r\n          cards: state[listId].cards.filter(filterDeleted)\r\n        }\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst cardsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case \"ADD_CARD\": {\r\n      const { cardText, cardDesc, cardId } = action.payload;\r\n      return { ...state, [cardId]: { text: cardText, desc: cardDesc, _id: cardId } };\r\n    }\r\n    case \"CHANGE_CARD_TEXT\": {\r\n      const { cardText, cardDesc, cardId } = action.payload;\r\n      return { ...state, [cardId]: { ...state[cardId], text: cardText, desc: cardDesc } };\r\n    }\r\n    case \"DELETE_CARD\": {\r\n      const { cardId } = action.payload;\r\n      const { [cardId]: deletedCard, ...restOfCards } = state;\r\n      return restOfCards;\r\n    }\r\n    // Find every card from the deleted list and remove it\r\n    case \"DELETE_LIST\": {\r\n      const { cards: cardIds } = action.payload;\r\n      return Object.keys(state)\r\n        .filter(cardId => !cardIds.includes(cardId))\r\n        .reduce(\r\n          (newState, cardId) => ({ ...newState, [cardId]: state[cardId] }),\r\n          {}\r\n        );\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst reducers = combineReducers({\r\n  board,\r\n  listsById,\r\n  cardsById\r\n});\r\n\r\n/***\r\n * OVER HERE :)\r\n * \r\n * I SAID\r\n *        .-'''-.\r\n *       '   _    \\\r\n *     /   /` '.   \\.----.     .----.   __.....__\r\n *    .   |     \\  ' \\    \\   /    /.-''         '.\r\n *    |   '      |  ' '   '. /'   //     .-''\"'-.  `. .-,.--.\r\n *    \\    \\     / /  |    |'    //     /________\\   \\|  .-. |\r\n *     `.   ` ..' /   |    ||    ||                  || |  | |\r\n *        '-...-'`    '.   `'   .'\\    .-------------'| |  | |\r\n *                     \\        /  \\    '-.____...---.| |  '-\r\n *                      \\      /    `.             .' | |\r\n *                       '----'       `''-...... -'   | |\r\n *                                                    |_|\r\n *       .              __.....__                   __.....__\r\n *     .'|          .-''         '.             .-''         '.\r\n *    <  |         /     .-''\"'-.  `. .-,.--.  /     .-''\"'-.  `.\r\n *     | |        /     /________\\   \\|  .-. |/     /________\\   \\\r\n *     | | .'''-. |                  || |  | ||                  |\r\n *     | |/.'''. \\\\    .-------------'| |  | |\\    .-------------'\r\n *     |  /    | | \\    '-.____...---.| |  '-  \\    '-.____...---.\r\n *     | |     | |  `.             .' | |       `.             .'\r\n *     | |     | |    `''-...... -'   | |         `''-...... -'\r\n *     | '.    | '.                   |_|\r\n *     '---'   '---'\r\n */\r\nconst saveState = state => {\r\n  try {\r\n    const serializedState = JSON.stringify(state);\r\n    localStorage.setItem(\"state\", serializedState);\r\n  } catch {\r\n    // ignore write errors\r\n  }\r\n};\r\n\r\nconst loadState = () => {\r\n  try {\r\n    const serializedState = localStorage.getItem(\"state\");\r\n    if (serializedState === null) {\r\n      return undefined;\r\n    }\r\n    console.log(\"Loading JSON\", serializedState);\r\n    return JSON.parse(serializedState);\r\n  } catch (err) {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nconst persistedState = loadState();\r\nconst store = createStore(reducers, persistedState);\r\n\r\nstore.subscribe(\r\n  throttle(() => {\r\n    saveState(store.getState());\r\n  }, 1000)\r\n);\r\n\r\nconsole.log(store.getState());\r\nif (!store.getState().board.lists.length) {\r\n  console.log(\"SEED\");\r\n  seed(store);\r\n}\r\n\r\nexport default store;\r\n"]},"metadata":{},"sourceType":"module"}